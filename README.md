# Store Sales Prediction

## プロジェクト概要

Kaggleのコンペを題材にデータ分析を行いました。
エクアドルの食料品小売業者の各店舗の各商品ごとの販売個数を予測するプロジェクトです。
具体的には、過去数年間の各店舗、各商品ごとの販売個数データから、ある一定期間の各店舗、買う商品ごとの販売個数を予測し、
商品の在庫管理などに生かすデータ分析です。

---

## 背景

取り組みやすい内容であると同時に、複数のCSVデータを組み合わせて分析をする必要のあるプロジェクトであったため、
このプロジェクトに取り組みました。：

* データの前処理
* 時系列データの特徴量エンジニアリング
* 時系列データにおける交差検証法によるモデル評価
* ハイパーパラメータチューニング（Optuna）
* SHAP値の可視化

---

## 技術スタック

* 言語: Python 3.12
* ライブラリ: pandas, numpy, scikit-learn, lightgbm, Streamlit, Optuna
* バージョン管理: Git, GitHub

---



---

## 主要スクリプトの概要

| スクリプト                         | 役割                                  | 出力                        |
| ----------------------------- | ----------------------------------- | ------------------------- |
| `store_salesデータ.ipynb` | データ結合・前処理・特徴量作成・学習・予測               | `predictions.csv`,`val_shap_values.csv`,`val_mean_shap.csv` |
| `app.py`                  | Streamlit でダッシュボード表示                | ブラウザ上の可視化 UI              |

---

## 実行手順

### 1. メインパイプライン実行

グーグルコラボで、notebookを実行

### 2. ファイル移動

1で保存されたファイルをローカル環境のapp.pyと同じフォルダに置く

### 3. Streamlit アプリ起動

```bash
streamlit run app.py
```

---

## 出力結果

| 出力                               | 内容                                   |
| -------------------------------- | ------------------------------------ |
| `Streamlit UI`                   | 在庫予測、平均SHAP値、個別SHAPグラフ     |

---

## モデル概要

* **使用モデル:** LightGBM
* **目的:** エクアドル小売業者の店舗・商品群ごとの販売個数予測(回帰)
* **評価指標:** RMSLE
* **特徴量:** 年月日、曜日、店舗・商品群ごとの過去の平均販売個数、プロモーションの有無、原油価格の変動　等
* **学習方法:** KFold 3-fold クロスバリデーション
---

## 今後の改善点

* モデル精度向上（特徴量追加、ハイパーパラメータ調整、交差検証時のデータ分割方法の改善）
* Streamlit ダッシュボードの UI 改善

---

## 注意点

* 使用データは、Kaggleのサイトからダウンロードしてください。
リンク：https://www.kaggle.com/competitions/store-sales-time-series-forecasting/data

---

## ライセンス

このプロジェクトは **MIT ライセンス** の下で公開されています。
詳細は [LICENSE](./LICENSE) ファイルをご覧ください。
